/*
    SPEC-SECTIONS.CSS

    - updated: 29.12.17
    - liquidvisual.com

    GLOSSARY:

        .section
            &.is-dark
            &.is-darker
            &.is-darker
            &.has-dark-bleed
            &.has-darker-bleed
            &.has-light-bleed
            &.has-image-bg
                &.is-fixed
                &.has-fixed-bleed
                &.has-tint
                &.has-bleed-tint

    NOTES:
        PROS: the main pros towards this new setup

        * MEGA container no longer necessary
        * remove overflow from hero
        * cleaner (in theory) breadcrumbs code
        * images inside containers have more accurate sizing
        * assume the lack of hacky pseudos will help render glitches on ipad
        * having one main system means breadcrumbs and hero can use same codebase
        * clearer breakpoints
        * footer is cleaner
        * better footer with trackpad scrolling (glitches on other)
        * can reliably enable fixed footer on tablets etc
        * can have elements appear in the rails (I think?)
        * is more automated

        CONS:

        * creates overriding issues with z-index
        * breadcrumbs is still hard to work with
        * new techniques force padding to be applied to contains instead of simpler sections (difficult trust me)
        * harder mental model
        * overall more problems and mental hoops that stray from convention
        * forces relative onto containers
        * can no longer specify backgrounds in CSS without "important"
        * comprises convention of the hero carousel

*/
//-----------------------------------------------------------------
// VARIABLES
//-----------------------------------------------------------------
//-----------------------------------------------------------------
// SECTION
//-----------------------------------------------------------------

.spec-section {
    position: relative; // [LOCKED] - for overlays
    z-index: 1; // [LOCKED]

    //=========================================
    // CONTAINER PADDING
    //=========================================

    > .container {
        position: relative; // [LOCKED] - since padding targets the container
        height: 100%; // [LOCKED] - allows height to be set on the section
        padding-top:    ($spacer * 2.5); // [LOCKED]
        padding-bottom: ($spacer * 2.5); // [LOCKED]
        background-color: $red; // ALERT: MUST SET COLOR
        z-index: 1; // [LOCKED]

        @include media-breakpoint-up(md) {
            padding-top:    ($spacer * 3); // [LOCKED]
            padding-bottom: ($spacer * 3); // [LOCKED]
        }
    }

    //=========================================
    // FOREGROUND COLORS [LOCKED]
    //=========================================

    &.is-dark,   &.is-dark > .container   { background-color: $gray-dark; }
    &.is-darker, &.is-darker > .container { background-color: $gray-darker; }
    &.is-light,  &.is-light > .container  { background-color: $gray-light; }
    &.is-white,  &.is-white > .container  { background-color: white; } // breadcrumbs only

    //=========================================
    // BACKGROUND COLORS EXPLICIT [LOCKED]
    //=========================================

    @include media-breakpoint-up(xl) {
        &.has-dark-bleed   { background: $gray-dark; }
        &.has-darker-bleed { background: $gray-darker; }
        &.has-light-bleed  { background: desaturate(darken($gray-light, 4%), 1%); }
    }

    //=========================================
    // PAGE SHADOW OVERLAY (XL+)
    //=========================================

    &:after {
        @include media-breakpoint-up(xl) {
            content: "";
            position: absolute;
            top: 0;
            left: 0; // needed?
            width: 100%;
            height: 100%;
            background: url(/assets/img/layout/page-shadow.png) repeat-y top center;
            background-size: rem-calc(1400); // [LOCKED] - image size
            z-index: -1;
        }
    }
}

//>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
// HAS DARK TEXT (DARK TEXT ON LIGHT)
// this may get added to in future (?)
//>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

.spec-section.is-light {
    color: $gray;

    h1, h2, h3, h4, h5, h6 {
        color: $gray-dark;
    }

    // duplicated in panels
    // .form-control {
    //     background: darken($gray-light, 2%);
    //     color: $gray;
    // }
}

//-----------------------------------------------------------------
// HAS IMAGE BG
//-----------------------------------------------------------------

.spec-section.has-image-bg {

    > .container {
        background: none; // [LOCKED] - score

        @include media-breakpoint-up(xl) {
            background-image: inherit;
        }
    }

    //=========================================
    // OVERLAY ADDITIONALS
    //=========================================

    &:before,
    &.has-tint > .container:after {
        content: "";
        position: absolute;
        top: 0;
        left: 0; // needed?
        width: 100%;
        height: 100%;
        z-index: -1;
    }

    // this will be overriden by the container
    &.has-tint:before {
        @include media-breakpoint-down(lg) {
            background: rgba(black, 0.4);
        }
    }

    //=========================================
    // ADDITIONAL COMMANDS
    //=========================================

    @include media-breakpoint-up(xl) {

        // BLEED COLORS WITH IMAGE FOREGROUNDS
        // re-purpose .has-bleed-tint by using it as a coloured overlay

        &.has-dark-bleed:before   {  background: $gray-dark; }
        &.has-darker-bleed:before {  background: $gray-darker; }
        &.has-light-bleed:before  {  background: desaturate(darken($gray-light, 4%), 1%); } //desaturate(darken($gray-light, 8%), 10%);

        // HAS TINT
        &.has-tint > .container:after {
            background: rgba(black, 0.4);
        }

        // HAS BLEED TINT
        &.has-bleed-tint:before {
            background: rgba(black, 0.4); // darker
        }

        // HAS FIXED BLEED
        &.has-fixed-bleed {
            background-attachment: fixed;
        }

        // IS FIXED
        &.is-fixed > .container {
            background-attachment: fixed;
        }
    }
}

//=========================================
// SWITCH FG TO BG ON LG DOWN
// [LOCKED] - must be here to prevent override by 'background'
//=========================================

.spec-section.has-image-bg,
.spec-section.has-image-bg > .container {
    background-repeat: no-repeat;
    background-position: center center;
    background-size: cover;
}

//-----------------------------------------------------------------
// CONTEXT
// In case of tutorial item, less gap to content for mobiles + tablet
//-----------------------------------------------------------------

.breadcrumb-wrapper + .section {
    @include media-breakpoint-down(md) {
        padding-top: $spacer * 2;
    }
}

//=========================================
// box-shadow: 0px -30px  50px 10px rgba(black, 0.2); // [LOCKED]
//=========================================